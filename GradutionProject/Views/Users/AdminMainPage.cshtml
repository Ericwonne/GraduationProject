
@{
    ViewBag.Title = "管理员你好-学生选课管理信息系统";
    System.Data.DataTable student = Model.Tables["student"];  //student table
    System.Data.DataTable teacher = Model.Tables["teacher"];  //teacher table
}

<h2>欢迎您，管理员！</h2>
<br />
<ul id="myTab" class="nav nav-tabs">
    <li class="active">
        <a href="#student" data-toggle="tab">
            管理学生
        </a>
    </li>
    <li>
        <a href="#teacher" data-toggle="tab">
            管理教师
        </a>
    </li>
    <li>
        <a href="#course" data-toggle="tab">
            管理课程
        </a>
    </li>
    <li>
        <a href="#miscellaneous" data-toggle="tab">
            管理其他
        </a>
    </li>
</ul>

<div id="myTabContent" class="tab-content">
    <!--管理学生-->
    <div class="tab-pane fade in active" id="student">
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    所有学生列表
                    <small></small>
                </h3>
            </div>
            <div class="container" style="margin-top:0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="table-responsive">
                            <table class="table table-bordered table-striped" id="studenttable">
                                <thead>
                                    <tr>
                                        <th><i class="fa fa-hashtag"></i>&nbsp;姓名 </th>
                                        <th><i class="fa fa-female"></i></th>
                                        <th>年龄</th>
                                        <th><i class="fa fa-address-book-o"></i>&nbsp;邮箱</th>
                                        <th><i class="fa fa-mobile-phone fa-lg"></i>&nbsp;手机</th>
                                        <th><i class="fa fa-qq"></i>&nbsp;QQ</th>
                                        <th><i class="fa fa-graduation-cap"></i>&nbsp;毕业院校</th>
                                        <th><i class="fa fa-hashtag"></i>&nbsp;专业</th>
                                        <th><i class="fa fa-hashtag"></i>&nbsp;在读学位</th>
                                        <th><i class="fa fa-hashtag"></i>&nbsp;年级</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (System.Data.DataRow rows in student.Rows)
                                    {
                                        <tr>
                                            <td name="@rows[0]">@rows[1]</td>
                                            <td name="@rows[2].ToString().ToLower()"></td>
                                            <td>@rows[3]</td>
                                            <td>@rows[4]</td>
                                            <td>@rows[7]</td>
                                            <td>@rows[6]</td>
                                            <td>@rows[8]</td>
                                            <td>@rows[10]</td>
                                            <td name="@rows[11]"></td>
                                            <td name="@rows[12]"></td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-12" style="padding-bottom:2em;">
                        <button class="btn btn-info" id="addstudent"><i class="fa fa-plus"></i> 新增学生数据</button>
                        <button class="btn btn-danger" id="s_submitChange" onclick="submitChange()"><i class="fa fa-upload"></i> 提交所有修改</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--管理教师-->
    <div class="tab-pane fade" id="teacher">
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    教师列表
                    <small></small>
                </h3>
            </div>
            <div class="container" style="margin-top:0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="table-responsive">
                            <table class="table table-bordered table-striped" id="teachertable">
                                <thead>
                                    <tr>
                                        <th><i class="fa fa-hashtag"></i>&nbsp;姓名 </th>
                                        <th><i class="fa fa-female"></i><i class="fa fa-male"></i>&nbsp;</th>
                                        <th><i class="fa fa-address-book-o"></i>&nbsp; 邮箱</th>
                                        <th><i class="fa fa-mobile-phone fa-lg"></i>&nbsp; 手机</th>
                                        <th><i class="fa fa-qq"></i>&nbsp; QQ</th>
                                        <th><i class="fa fa-graduation-cap"></i>&nbsp; 毕业院校</th>
                                        <th><i class="fa fa-hashtag"></i>&nbsp;专业</th>
                                        <th><i class="fa fa-hashtag"></i>&nbsp;课程</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (System.Data.DataRow rows in teacher.Rows)
                                    {
                                        <tr>
                                            <td name="@rows[0]">@rows[1]</td>
                                            <td>@rows[2]</td>
                                            <td>@rows[4]</td>
                                            <td>@rows[7]</td>
                                            <td>@rows[6]</td>
                                            <td>@rows[8]</td>
                                            <td>@rows[10]</td>
                                            <td>Placeholder</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-12" style="padding-bottom:2em;">
                        <button class="btn btn-info" id="addteacher"><i class="fa fa-plus"></i> 新增学生数据</button>
                        <button class="btn btn-danger" id="t_submitChange" onclick="submitChange()"><i class="fa fa-upload"></i> 提交所有修改</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--管理课程-->
    <div class="tab-pane fade" id="course">
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    课程列表
                    <small></small>
                </h3>
            </div>
        </div>
    </div>
    <!--管理杂项-->
    <div class="tab-pane fade" id="miscellaneous">
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    管理所有用户
                    <small></small>
                </h3>
            </div>
            <a href="DisplayUsers" class="btn btn-info" onclick="solveConflictTable()">查看所有用户</a>
        </div>
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    管理教学楼
                    <small></small>
                </h3>
            </div>
        </div>
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    管理教室
                    <small></small>
                </h3>
            </div>
        </div>
    </div>
</div>

<script src="http://cdn.bootcss.com/jquery/1.11.0/jquery.min.js" type="text/javascript"></script>
<script src="~/Scripts/bootstable.js"></script>
<script>
    window.onload = function loadPage() {
        //Change the database field to human readable. Not on teachertable due to it has been processed at backend.
        var tds = document.getElementById('studenttable').getElementsByTagName('td');  //student table
        DisplayHumanReadable(tds);
    }

    function DisplayHumanReadable(tds) {
        for (var i = 0; i < tds.length; i++) {
            if (tds[i].hasAttribute('name') == true) {
                switch (tds[i].getAttribute('name')) {
                    case 'm': tds[i].innerHTML = "男"; break;
                    case 'f': tds[i].innerHTML = "女"; break;
                    case 'u': tds[i].innerHTML = "未知"; break;
                    case 'B': tds[i].innerHTML = "学士"; break;
                    case 'M': tds[i].innerHTML = "硕士"; break;
                    case 'D': tds[i].innerHTML = "博士"; break;
                    case 'FR': tds[i].innerHTML = "大一"; break;
                    case 'SO': tds[i].innerHTML = "大二"; break;
                    case 'JU': tds[i].innerHTML = "大三"; break;
                    case 'SE': tds[i].innerHTML = "大四"; break;
                }
            }
        }
    }

    function submitChange() {
        alert("a");
    }
</script>
<script>
    $('#studenttable').SetEditable({
        $addButton: $('#addstudent')
    });
    $('#teachertable').SetEditable({
        $addButton: $('#addteacher')
    });
</script>
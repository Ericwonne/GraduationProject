
@{
    ViewBag.Title = "管理员你好-学生选课管理信息系统";
    GradutionProject.Models.PeriodGetter P = new GradutionProject.Models.PeriodGetter();
    System.Data.DataTable student = Model.Tables["student"];            //student table
    System.Data.DataTable teacher = Model.Tables["teacher"];            //teacher table
    System.Data.DataTable AllCourses = Model.Tables["AllCourses"];  //course table
}
<style type="text/css">
    td.alt {
        background-color: #ffc;
        background-color: rgba(230, 127, 34, 0.2);
    }
</style>
<style type="text/css">
    * {
        outline: none;
    }

    .tippy-tooltip.honeybee-theme {
        /* Your styling here. Example: */
        background-color: yellow;
        border: 2px solid orange;
    }

        .tippy-tooltip.honeybee-theme [x-arrow] {
            /* Your arrow styling here. Uses transform: rotate() so no need for CSS triangle shenanigans. */
            background-color: yellow;
            border: 2px solid;
            border-color: transparent transparent orange orange; /* same for any position */
        }

        .tippy-tooltip.honeybee-theme .tippy-tooltip-content {
            /* Your styling here. Example: */
            color: black;
        }

        .tippy-tooltip.honeybee-theme [x-circle] {
            /* Your styling here. Example: */
            background-color: yellow;
        }

    .tippy-touch {
        cursor: pointer !important;
    }

    .tippy-popper {
        visibility: hidden;
        max-width: 400px;
        -webkit-perspective: 1000px;
        perspective: 1000px;
        z-index: 9999;
    }

        .tippy-popper.enter {
            opacity: 1;
            -webkit-transition-property: all;
            transition-property: all;
            -webkit-transition-timing-function: ease-out;
            transition-timing-function: ease-out;
        }

        .tippy-popper.leave {
            opacity: 0;
            -webkit-transition-property: all;
            transition-property: all;
            -webkit-transition-timing-function: ease-in;
            transition-timing-function: ease-in;
        }

        .tippy-popper.html-template {
            max-width: 95%;
            max-width: calc(100% - 2rem);
        }

        .tippy-popper[x-placement=top] [x-arrow] {
            -webkit-transform: rotate(-45deg);
            transform: rotate(-45deg);
            bottom: -5px;
        }

        .tippy-popper[x-placement=top] [x-circle] {
            -webkit-transform-origin: 0 33%;
            transform-origin: 0 33%;
        }

            .tippy-popper[x-placement=top] [x-circle].enter {
                opacity: 1;
                -webkit-transform: scale(1) translate(-50%,-50%);
                transform: scale(1) translate(-50%,-50%);
            }

            .tippy-popper[x-placement=top] [x-circle].leave {
                opacity: 0;
                -webkit-transform: scale(0) translate(-50%,-50%);
                transform: scale(0) translate(-50%,-50%);
            }

        .tippy-popper[x-placement=top] [data-animation=none].enter, .tippy-popper[x-placement=top] [data-animation=none].leave {
            opacity: 1;
            -webkit-transform: translateY(-10px);
            transform: translateY(-10px);
        }

        .tippy-popper[x-placement=top] [data-animation=perspective] {
            -webkit-transform-origin: bottom;
            transform-origin: bottom;
        }

            .tippy-popper[x-placement=top] [data-animation=perspective].enter {
                opacity: 1;
                -webkit-transform: translateY(-10px) rotateX(0);
                transform: translateY(-10px) rotateX(0);
            }

            .tippy-popper[x-placement=top] [data-animation=perspective].leave {
                opacity: 0;
                -webkit-transform: translateY(0) rotateX(90deg);
                transform: translateY(0) rotateX(90deg);
            }

        .tippy-popper[x-placement=top] [data-animation=fade].enter {
            opacity: 1;
            -webkit-transform: translateY(-10px);
            transform: translateY(-10px);
        }

        .tippy-popper[x-placement=top] [data-animation=fade].leave {
            opacity: 0;
            -webkit-transform: translateY(-10px);
            transform: translateY(-10px);
        }

        .tippy-popper[x-placement=top] [data-animation=shift].enter {
            opacity: 1;
            -webkit-transform: translateY(-10px);
            transform: translateY(-10px);
        }

        .tippy-popper[x-placement=top] [data-animation=shift].leave {
            opacity: 0;
            -webkit-transform: translateY(0);
            transform: translateY(0);
        }

        .tippy-popper[x-placement=top] [data-animation=scale].enter {
            opacity: 1;
            -webkit-transform: translateY(-10px) scale(1);
            transform: translateY(-10px) scale(1);
        }

        .tippy-popper[x-placement=top] [data-animation=scale].leave {
            opacity: 0;
            -webkit-transform: translateY(0) scale(0);
            transform: translateY(0) scale(0);
        }

        .tippy-popper[x-placement=bottom] [x-arrow] {
            -webkit-transform: rotate(135deg);
            transform: rotate(135deg);
            top: -5px;
        }

        .tippy-popper[x-placement=bottom] [x-circle] {
            -webkit-transform-origin: 0 -33%;
            transform-origin: 0 -33%;
        }

            .tippy-popper[x-placement=bottom] [x-circle].enter {
                opacity: 1;
                -webkit-transform: scale(1) translate(-50%,-50%);
                transform: scale(1) translate(-50%,-50%);
            }

            .tippy-popper[x-placement=bottom] [x-circle].leave {
                opacity: 0;
                -webkit-transform: scale(0) translate(-50%,-50%);
                transform: scale(0) translate(-50%,-50%);
            }

        .tippy-popper[x-placement=bottom] [data-animation=none].enter, .tippy-popper[x-placement=bottom] [data-animation=none].leave {
            opacity: 1;
            -webkit-transform: translateY(10px);
            transform: translateY(10px);
        }

        .tippy-popper[x-placement=bottom] [data-animation=perspective] {
            -webkit-transform-origin: top;
            transform-origin: top;
        }

            .tippy-popper[x-placement=bottom] [data-animation=perspective].enter {
                opacity: 1;
                -webkit-transform: translateY(10px) rotateX(0);
                transform: translateY(10px) rotateX(0);
            }

            .tippy-popper[x-placement=bottom] [data-animation=perspective].leave {
                opacity: 0;
                -webkit-transform: translateY(0) rotateX(-90deg);
                transform: translateY(0) rotateX(-90deg);
            }

        .tippy-popper[x-placement=bottom] [data-animation=fade].enter {
            opacity: 1;
            -webkit-transform: translateY(10px);
            transform: translateY(10px);
        }

        .tippy-popper[x-placement=bottom] [data-animation=fade].leave {
            opacity: 0;
            -webkit-transform: translateY(10px);
            transform: translateY(10px);
        }

        .tippy-popper[x-placement=bottom] [data-animation=shift].enter {
            opacity: 1;
            -webkit-transform: translateY(10px);
            transform: translateY(10px);
        }

        .tippy-popper[x-placement=bottom] [data-animation=shift].leave {
            opacity: 0;
            -webkit-transform: translateY(0);
            transform: translateY(0);
        }

        .tippy-popper[x-placement=bottom] [data-animation=scale].enter {
            opacity: 1;
            -webkit-transform: translateY(10px) scale(1);
            transform: translateY(10px) scale(1);
        }

        .tippy-popper[x-placement=bottom] [data-animation=scale].leave {
            opacity: 0;
            -webkit-transform: translateY(0) scale(0);
            transform: translateY(0) scale(0);
        }

        .tippy-popper[x-placement=left] [x-arrow] {
            -webkit-transform: rotate(135deg);
            transform: rotate(135deg);
            right: -5px;
            top: 50%;
        }

        .tippy-popper[x-placement=left] [x-circle] {
            -webkit-transform-origin: 50% 5%;
            transform-origin: 50% 5%;
        }

            .tippy-popper[x-placement=left] [x-circle].enter {
                opacity: 1;
                -webkit-transform: scale(1) translate(-50%,-50%);
                transform: scale(1) translate(-50%,-50%);
            }

            .tippy-popper[x-placement=left] [x-circle].leave {
                opacity: 0;
                -webkit-transform: scale(0) translate(-50%,-33%);
                transform: scale(0) translate(-50%,-33%);
            }

        .tippy-popper[x-placement=left] [data-animation=none].enter, .tippy-popper[x-placement=left] [data-animation=none].leave {
            opacity: 1;
            -webkit-transform: translateX(-10px);
            transform: translateX(-10px);
        }

        .tippy-popper[x-placement=left] [data-animation=perspective] {
            -webkit-transform-origin: right;
            transform-origin: right;
        }

            .tippy-popper[x-placement=left] [data-animation=perspective].enter {
                opacity: 1;
                -webkit-transform: translateX(-10px) rotateY(0);
                transform: translateX(-10px) rotateY(0);
            }

            .tippy-popper[x-placement=left] [data-animation=perspective].leave {
                opacity: 0;
                -webkit-transform: translateX(0) rotateY(-90deg);
                transform: translateX(0) rotateY(-90deg);
            }

        .tippy-popper[x-placement=left] [data-animation=fade].enter {
            opacity: 1;
            -webkit-transform: translateX(-10px);
            transform: translateX(-10px);
        }

        .tippy-popper[x-placement=left] [data-animation=fade].leave {
            opacity: 0;
            -webkit-transform: translateX(-10px);
            transform: translateX(-10px);
        }

        .tippy-popper[x-placement=left] [data-animation=shift].enter {
            opacity: 1;
            -webkit-transform: translateX(-10px);
            transform: translateX(-10px);
        }

        .tippy-popper[x-placement=left] [data-animation=shift].leave {
            opacity: 0;
            -webkit-transform: translateX(0);
            transform: translateX(0);
        }

        .tippy-popper[x-placement=left] [data-animation=scale].enter {
            opacity: 1;
            -webkit-transform: translateX(-10px) scale(1);
            transform: translateX(-10px) scale(1);
        }

        .tippy-popper[x-placement=left] [data-animation=scale].leave {
            opacity: 0;
            -webkit-transform: translateX(0) scale(0);
            transform: translateX(0) scale(0);
        }

        .tippy-popper[x-placement=right] [x-arrow] {
            -webkit-transform: rotate(-45deg);
            transform: rotate(-45deg);
            left: -5px;
            top: 50%;
        }

        .tippy-popper[x-placement=right] [x-circle] {
            -webkit-transform-origin: -50% 5%;
            transform-origin: -50% 5%;
        }

            .tippy-popper[x-placement=right] [x-circle].enter {
                opacity: 1;
                -webkit-transform: scale(1) translate(-50%,-50%);
                transform: scale(1) translate(-50%,-50%);
            }

            .tippy-popper[x-placement=right] [x-circle].leave {
                opacity: 0;
                -webkit-transform: scale(0) translate(-50%,-33%);
                transform: scale(0) translate(-50%,-33%);
            }

        .tippy-popper[x-placement=right] [data-animation=none].enter, .tippy-popper[x-placement=right] [data-animation=none].leave {
            opacity: 1;
            -webkit-transform: translateX(10px);
            transform: translateX(10px);
        }

        .tippy-popper[x-placement=right] [data-animation=perspective] {
            -webkit-transform-origin: left;
            transform-origin: left;
        }

            .tippy-popper[x-placement=right] [data-animation=perspective].enter {
                opacity: 1;
                -webkit-transform: translateX(10px) rotateY(0);
                transform: translateX(10px) rotateY(0);
            }

            .tippy-popper[x-placement=right] [data-animation=perspective].leave {
                opacity: 0;
                -webkit-transform: translateX(0) rotateY(90deg);
                transform: translateX(0) rotateY(90deg);
            }

        .tippy-popper[x-placement=right] [data-animation=fade].enter {
            opacity: 1;
            -webkit-transform: translateX(10px);
            transform: translateX(10px);
        }

        .tippy-popper[x-placement=right] [data-animation=fade].leave {
            opacity: 0;
            -webkit-transform: translateX(10px);
            transform: translateX(10px);
        }

        .tippy-popper[x-placement=right] [data-animation=shift].enter {
            opacity: 1;
            -webkit-transform: translateX(10px);
            transform: translateX(10px);
        }

        .tippy-popper[x-placement=right] [data-animation=shift].leave {
            opacity: 0;
            -webkit-transform: translateX(0);
            transform: translateX(0);
        }

        .tippy-popper[x-placement=right] [data-animation=scale].enter {
            opacity: 1;
            -webkit-transform: translateX(10px) scale(1);
            transform: translateX(10px) scale(1);
        }

        .tippy-popper[x-placement=right] [data-animation=scale].leave {
            opacity: 0;
            -webkit-transform: translateX(0) scale(0);
            transform: translateX(0) scale(0);
        }

    .tippy-tooltip {
        position: relative;
        color: #fff;
        border-radius: 4px;
        padding: .5rem 1rem;
        text-align: center;
        will-change: transform;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        background-color: #333;
    }

        .tippy-tooltip [x-arrow] {
            z-index: -1;
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #333;
            border: 1px solid;
            border-color: transparent transparent #333 #333;
        }

        .tippy-tooltip[data-animatefill] {
            overflow: hidden;
            background-color: transparent;
        }

        .tippy-tooltip [x-circle] {
            position: absolute;
            background-color: #333;
            border-radius: 50%;
            width: 130%;
            width: calc(125% + 2rem);
            height: 0;
            padding-bottom: 130%;
            padding-bottom: calc(125% + 2rem);
            left: 50%;
            -webkit-transition: all ease-out;
            transition: all ease-out;
            z-index: -1;
            opacity: 0;
        }

        .tippy-tooltip.light-theme {
            color: #203d5d;
            box-shadow: 0 0 16px -4px rgba(0,20,40,.2),0 0 80px -10px rgba(0,20,40,.3);
            background-color: #f3f6f9;
            border: 1px solid #ced2e2;
        }

            .tippy-tooltip.light-theme [x-circle] {
                background-color: #f3f6f9;
            }

            .tippy-tooltip.light-theme [x-arrow] {
                background-color: #f3f6f9;
                border-color: transparent transparent #ced2e2 #ced2e2;
            }

            .tippy-tooltip.light-theme[data-animatefill] {
                background-color: transparent;
            }
</style>

<h2>欢迎您，管理员！<small id="showDate"></small></h2>
<br />
<ul id="myTab" class="nav nav-tabs">
    <li id="student_tab" class="active">
        <a href="#student" data-toggle="tab">
            管理学生
        </a>
    </li>
    <li id="teacher_tab">
        <a href="#teacher" data-toggle="tab">
            管理教师
        </a>
    </li>
    <li id="course_tab">
        <a href="#course" data-toggle="tab">
            管理课程
        </a>
    </li>
    <li id="miscellaneous_tab">
        <a href="#miscellaneous" data-toggle="tab">
            管理其他
        </a>
    </li>
</ul>

<div id="myTabContent" class="tab-content">
    <!--管理学生-->
    <div class="tab-pane fade in active" id="student">
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    所有学生列表
                    <small></small>
                </h3>
            </div>
            <div class="container" style="margin-top:0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="table-responsive">
                            <table class="table table-bordered table-striped" id="studenttable">
                                <thead>
                                    <tr>
                                        <th name="@student.Columns[0].ColumnName" hidden></th>
                                        <th name="@student.Columns[1].ColumnName"><i class="fa fa-hashtag"></i>&nbsp;姓名 </th>
                                        <th name="@student.Columns[2].ColumnName"><i class="fa fa-female"></i></th>
                                        <th name="@student.Columns[3].ColumnName">年龄</th>
                                        <th name="@student.Columns[4].ColumnName"><i class="fa fa-address-book-o"></i>&nbsp;邮箱</th>
                                        <th name="@student.Columns[7].ColumnName"><i class="fa fa-mobile-phone fa-lg"></i>&nbsp;手机</th>
                                        <th name="@student.Columns[6].ColumnName"><i class="fa fa-qq"></i>&nbsp;QQ</th>
                                        <th name="@student.Columns[8].ColumnName"><i class="fa fa-graduation-cap"></i>&nbsp;毕业院校</th>
                                        <th name="@student.Columns[10].ColumnName"><i class="fa fa-hashtag"></i>&nbsp;专业</th>
                                        <th name="@student.Columns[11].ColumnName"><i class="fa fa-hashtag"></i>&nbsp;在读学位</th>
                                        <th name="@student.Columns[12].ColumnName"><i class="fa fa-hashtag"></i>&nbsp;年级</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (System.Data.DataRow rows in student.Rows)
                                    {
                                        <tr>
                                            <td hidden>@rows[0]</td>
                                            <td>@rows[1]</td>
                                            <td name="@rows[2].ToString().ToLower()">@rows[2]</td>
                                            <td>@rows[3]</td>
                                            <td>@rows[4]</td>
                                            <td>@rows[7]</td>
                                            <td>@rows[6]</td>
                                            <td>@rows[8]</td>
                                            <td>@rows[10]</td>
                                            <td name="@rows[11]">@rows[11]</td>
                                            <td name="@rows[12]">@rows[12]</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-12" style="padding-bottom:2em;">
                        <button class="btn btn-info" id="addstudent"><i class="fa fa-plus"></i> 新增学生数据</button>
                        <button class="btn btn-danger" id="s_submitChange" onclick="submitChange('studenttable')"><i class="fa fa-upload"></i> 提交所有修改</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--管理教师-->
    <div class="tab-pane fade" id="teacher">
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    教师列表
                    <small></small>
                </h3>
            </div>
            <div class="container" style="margin-top:0">
                <div class="row">
                    <div class="col-md-12">
                        <div class="table-responsive">
                            <table class="table table-bordered table-striped" id="teachertable">
                                <thead>
                                    <tr>
                                        <th name="@teacher.Columns[0].ColumnName" hidden></th>
                                        <th name="@teacher.Columns[1].ColumnName"><i class="fa fa-hashtag"></i>&nbsp;姓名 </th>
                                        <th name="@teacher.Columns[2].ColumnName"><i class="fa fa-female"></i><i class="fa fa-male"></i>&nbsp;</th>
                                        <th name="@teacher.Columns[4].ColumnName"><i class="fa fa-address-book-o"></i>&nbsp; 邮箱</th>
                                        <th name="@teacher.Columns[7].ColumnName"><i class="fa fa-mobile-phone fa-lg"></i>&nbsp; 手机</th>
                                        <th name="@teacher.Columns[6].ColumnName"><i class="fa fa-qq"></i>&nbsp; QQ</th>
                                        <th name="@teacher.Columns[8].ColumnName"><i class="fa fa-graduation-cap"></i>&nbsp; 毕业院校</th>
                                        <th name="@teacher.Columns[10].ColumnName"><i class="fa fa-hashtag"></i>&nbsp;专业</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (System.Data.DataRow rows in teacher.Rows)
                                    {
                                        <tr>
                                            <td hidden>@rows[0]</td>
                                            <td>@rows[1]</td>
                                            <td name="@rows[2].ToString().ToLower()">@rows[2]</td>
                                            <td>@rows[4]</td>
                                            <td>@rows[7]</td>
                                            <td>@rows[6]</td>
                                            <td>@rows[8]</td>
                                            <td>@rows[10]</td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-md-12" style="padding-bottom:2em;">
                        <button class="btn btn-info" id="addteacher"><i class="fa fa-plus"></i> 新增教师数据</button>
                        <button class="btn btn-danger" id="t_submitChange" onclick="submitChange('teachertable')"><i class="fa fa-upload"></i> 提交所有修改</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--管理课程-->
    <div class="tab-pane fade" id="course">
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    课程列表<small>一共有<strong>@AllCourses.Rows.Count</strong>  门课</small>
                </h3>
            </div>
            <div style="margin-bottom:3%">
                <a id="courseProject" href="../Courses/DisplayCourses" class="btn btn-success">查看当前培养计划中的课表</a>
            </div>

            <div class="input-group">
                <div class="input-group-addon"><i class="fa fa-search fa-lg"></i>&nbsp;</div>
                <input class="form-control" type="search" id="input-filter" size="15" placeholder="支持课程全部属性搜索" />
            </div>
            @{ int count = AllCourses.Columns.Count; string sep = "&";}
            <!--Table-->
            <table class="table" id="coursetable">
                <thead>
                    <tr>
                        <th hidden>
                            @{
                                int i = 0;
                                while (i < count)
                                {
                                    @AllCourses.Columns[i].ColumnName@sep
                                    i++;
                                }
                            }
                        </th>
                        <th><i class="fa fa-hashtag"></i>&nbsp;课程类别</th>
                        <th><i class="fa fa-hashtag"></i>&nbsp;所属学院</th>
                        <th><i class="fa fa-hashtag"></i>&nbsp;课程名称</th>
                        <th><i class="fa fa-hashtag"></i>&nbsp;上课周期</th>
                        <th><i class="fa fa-hashtag"></i>&nbsp;任课教师</th>
                        <th><i class="fa fa-hashtag"></i>&nbsp;上课地点</th>
                        <th><i class="fa fa-hashtag"></i>&nbsp;上课时间</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (System.Data.DataRow row in AllCourses.Rows)
                    {
                        <tr>
                            <td name="@row[0]" hidden>
                                @{
                                    i = 0;
                                    while (i < count)
                                    {
                                        @row[i]@sep
                                        i++;
                                    }
                                }
                            </td>
                            <td class="category"></td>
                            <td>@row[16]</td>
                            <td><a title="" href="SpecificCourse?id=@row[0]">@row[1]</a></td>
                            <td>@Convert.ToDateTime(row[4]).ToString("yy年MM月dd日")至 @Convert.ToDateTime(row[5]).ToString("MM月dd日")</td>
                            <td>@row[2]</td>
                            <td>@row[6]</td>
                            <td name="@row[7]">@P.Period[row[7].ToString()]</td>
                            <td>
                                <!--傻傻的方法 onclick="getSpecificInfo(this.parentElement.parentElement.children[0].children[0].getAttribute('href').split('=')[1])"-->
                                <button id="@row[0]" class="btn btn-default tippy-arrow" data-toggle="modal" data-target="#myModal" onclick="getSpecificInfo('@row[0]', '@row[1]')" title="Tooltip">
                                    <!--<button class="btn btn-link">-->
                                    审核
                                </button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>

            <!-- 模态框（Modal） -->
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                                &times;
                            </button>
                            <h4 class="modal-title" id="myModalLabel"></h4>
                        </div>
                        <div id="modal-body" class="modal-body" style="margin-top:0">
                        </div>
                        <div class="modal-footer" style="margin-top:0">
                            <button type="button" class="btn btn-default" data-dismiss="modal">
                                关闭
                            </button>
                            <button type="button" class="btn btn-primary" onclick="submitModal()">
                                提交更改
                            </button>
                        </div>
                    </div><!-- /.modal-content -->
                </div><!-- /.modal -->
            </div>

        </div>
    </div>
    <!--管理杂项-->
    <div class="tab-pane fade" id="miscellaneous">
        <!--所有用户-->
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    管理所有用户
                    <small></small>
                </h3>
            </div>
            <a href="DisplayUsers" class="btn btn-success">管理所有用户信息</a>
        </div>
        <!---->
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    管理教学楼
                    <small></small>
                </h3>
            </div>
        </div>
        <!---->
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    管理教室
                    <small></small>
                </h3>
            </div>
        </div>
        <!---->
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    管理学院名称
                    <small></small>
                </h3>
            </div>
        </div>
        <!---->
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    管理系别名称
                    <small></small>
                </h3>
            </div>
        </div>
        <!---->
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    管理学科门类
                    <small></small>
                </h3>
            </div>
        </div>
        <!---->
        <div style="margin-bottom:5%;margin-top:2%">
            <div class="page-header" style="margin-top:5px">
                <h3>
                    <small><i class="glyphicon glyphicon-tags"></i></small>
                    管理二级学科
                    <small></small>
                </h3>
            </div>
        </div>
    </div>
</div>

@*<script src="http://cdn.bootcss.com/jquery/1.11.0/jquery.min.js" type="text/javascript"></script>*@
@*<script src="https://cdn.bootcss.com/jquery/3.1.1/jquery.js"></script>*@
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery.filtertable.min.js"></script>
<script src="~/Scripts/tippy.js"></script>
<script src="~/Scripts/bootstable.js"></script>

<script>
    //Floppy: used to show the tooltip of each course
    new Tippy('.tippy-arrow', { position: 'top', animation: 'scale', arrow: 'true' });

    //-----------global variables-----------BEGIN//
    var DBFieldToHumanReadable = null;  //a map
    var label = null;              //label: The column name
    var initialModal = null;  //initialModal declare: global
    //-----------global variables-----------END//

    //Load evertthing alright in onload function
    window.onload = function loadPage() {
        //Initialize the map
        DBFieldToHumanReadable = new Map(
            [
                ['courseID', '课程编号'],
                ['courseName', '课程名称'],
                ['courseTeacher', '任课教师'],
                ['publishDate', '发布日期'],
                ['startDate', '开始日期'],
                ['endDate', '结束日期'],
                ['venue', '上课地点'],
                ['period', '上课时间'],
                ['examID', '考试编号'],
                ['chosen', '选课人数'],
                ['collected', '收藏次数'],
                ['courseInfo', '课程信息'],
                ['detailInfo', '详细信息'],
                ['subTag', '二级学科'],
                ['capacity', '容量'],
                ['ava', '是否发布'],
                ['faculty', '系别']
            ]
        );
        //Initialize the label in field
        label = document.getElementById('coursetable').children[0].children[0].children[0].innerText.replace(/(^\s*)|(\s*$)/g, "").slice(0, -1).split('&');

        //Add search feature
        $('#coursetable').filterTable({ // apply filterTable to all tables on this page
            inputSelector: '#input-filter' // use the existing input instead of creating a new one
        })

        //Change the database field to human readable. Not on teachertable due to it has been processed at backend.
        var tds = document.getElementById('studenttable').getElementsByTagName('td');  //student table
        DisplayHumanReadable(tds);
        tds = document.getElementById('teachertable').getElementsByTagName('td');       //teacher table
        DisplayHumanReadable(tds);
        showTeachWeek();                //显示教学周
        loadTooltip()

        //-----------------------------------------处理tab pane显示问题Begin-----------------------------------------//
        //!!!不知道为什么后台传过来的值如果第一个字符是“#”，前端就无法接收到这个值。
        //var item = "ViewData["tab"].ToString()";
        var href = window.location.href.toString().split('#')[window.location.href.toString().split('#').length - 1];
        var tagid = "";
        switch (href) {
            case 'student': tagid = href + "_tab"; break;
            case 'teacher': tagid = href + "_tab"; break;
            case 'course': tagid = href + "_tab"; break;
            case 'miscellaneous': tagid = href + "_tab"; break;
            default: tagid = "student_tab"; href = "student"; break;
        }

        document.getElementById(href).setAttribute("class", "tab-pane fade in active");
        document.getElementById(tagid).setAttribute("class", "active");
        //-----------------------------------------处理tab pane显示问题End-----------------------------------------//
    }

    //把数据库拿出来的非可读性文字转化为可读性文字如：M（男性），F（女性）..
    function DisplayHumanReadable(tds) {
        for (var i = 0; i < tds.length; i++) {
            if (tds[i].hasAttribute('name') == true) {
                switch (tds[i].getAttribute('name')) {
                    case 'm': tds[i].innerHTML = "男"; break;
                    case 'f': tds[i].innerHTML = "女"; break;
                    case 'u': tds[i].innerHTML = "未知"; break;
                    case 'B': tds[i].innerHTML = "学士"; break;
                    case 'M': tds[i].innerHTML = "硕士"; break;
                    case 'D': tds[i].innerHTML = "博士"; break;
                    case 'FR': tds[i].innerHTML = "大一"; break;
                    case 'SO': tds[i].innerHTML = "大二"; break;
                    case 'JU': tds[i].innerHTML = "大三"; break;
                    case 'SE': tds[i].innerHTML = "大四"; break;
                }
            }
        }
    }

    //与DisplayHumanReadable()功能相反
    function RevertToDatabaseTypes(tds, inputs) {
        for (var i = 0; i < tds.length; i++) {
            switch (tds[i].innerHTML) {
                case '男': tds[i].innerHTML = "M"; break;
                case '女': tds[i].innerHTML = "F"; break;
                case '未知': tds[i].innerHTML = "U"; break;
                case '学士': tds[i].innerHTML = "B"; break;
                case '硕士': tds[i].innerHTML = "M"; break;
                case '博士': tds[i].innerHTML = "D"; break;
                case '大一': tds[i].innerHTML = "FR"; break;
                case '大二': tds[i].innerHTML = "SO"; break;
                case '大三': tds[i].innerHTML = "JU"; break;
                case '大四': tds[i].innerHTML = "SE"; break;
            }
        }
        if (inputs.length == 0) {
            return;
        }
        else {
            for (var i = 0; i < inputs.length; i++) {
                switch (inputs[i].value) {
                    case '男': inputs[i].value = "M"; break;
                    case '女': inputs[i].value = "F"; break;
                    case '未知': inputs[i].value = "U"; break;
                    case '学士': inputs[i].value = "B"; break;
                    case '硕士': inputs[i].value = "M"; break;
                    case '博士': inputs[i].value = "D"; break;
                    case '大一': inputs[i].value = "FR"; break;
                    case '大二': inputs[i].value = "SO"; break;
                    case '大三': inputs[i].value = "JU"; break;
                    case '大四': inputs[i].value = "SE"; break;
                }
            }
        }

    }

    function submitChange(clickedBy) {
        var tds = document.getElementById(clickedBy).getElementsByTagName('td');
        var inputs = document.getElementById(clickedBy).getElementsByTagName('input');
        RevertToDatabaseTypes(tds, inputs);
        var destThs = document.getElementById(clickedBy).children[0].children[0].children;        //The trs in the thead part of the table
        var destTrs = document.getElementById(clickedBy).children[1].children;        //The trs in the tbody part of the table
        clickedBy = clickedBy == "studenttable" ? "student_information" : "teacher_information";
        var cmdTxt = "", sep = ";";
        var ifchanged = false;
        for (var t in destTrs) {
            //----------------------------------------Case Analysis Begin-----------------------------------------------//
            //对修改表格下面只分析了两种情况：
            //（1）即修改了表格中某一行但是没有点击行末的确认按钮，此时点击提交所有更改会将这部分修改提交；
            //（2）即修改了表格中某一行并且点击了行末的确认按钮，此种情况也会提交；
            //第三种情况存在，但未做处理：
            //（3）即第一次修改了表格中某一行，点击了行末的确认按钮；再点击该行进行修改，但点击了取消按钮；
            //         此种情况应该提交第一次做出的修改，可是根据下面的逻辑，点击取消之后该行不会提交；
            //----------------------------------------Case Analysis Middle---------------------------------------------//
            if (destTrs[t].id == 'editing') {           //Not knowing why 【destTrs[t].getAttribute('id')】 doesn't work!
                //此处完成未点击【bAcep】（即table中行元素的提交）按钮的修改项：提交
                var conditionString = " where " + destThs[0].getAttribute('name') + "='" + destTrs[t].children[0].children[1].value + "'";
                var updateString = "update " + clickedBy + " set ";
                var loopStr = "";
                for (var i = 1; i < destTrs[t].children.length - 1; i++) {
                    var key = destThs[i].getAttribute('name');
                    var val = destTrs[t].children[i].children[1].value;
                    loopStr += key + "='" + val + "',";
                }
                loopStr = loopStr.substr(0, loopStr.length - 1);
                updateString = updateString + loopStr + conditionString;
                cmdTxt += updateString + sep;
                ifchanged = true;
            }
            else if (destTrs[t].id == 'edited') {       //Not knowing why 【destTrs[t].getAttribute('id')】 doesn't work!
                //此处完成点击【bAcep】（即table中行元素的提交）按钮的修改项的：提交
                var conditionString = " where " + destThs[0].getAttribute('name') + "='" + destTrs[t].children[0].innerText + "'";
                var updateString = "update " + clickedBy + " set ";
                var loopStr = "";
                for (var i = 1; i < destTrs[t].children.length - 1; i++) {
                    var key = destThs[i].getAttribute('name');
                    var val = destTrs[t].children[i].innerText;
                    loopStr += key + "='" + val + "',";
                }
                loopStr = loopStr.substr(0, loopStr.length - 1);
                updateString = updateString + loopStr + conditionString;
                cmdTxt += updateString + sep;
                ifchanged = true;
            }
            else {
                //此处完成未修改项：不提交
            }
            //----------------------------------------Case Analysis End---------------------------------------------//
        }
        if (ifchanged == false) {
            alert("您未做任何修改！");
            return;
        }

        cmdTxt = cmdTxt.substr(0, cmdTxt.length - 1);
        var parames = new Array();
        parames.push({ name: "cmdTxt", value: cmdTxt });

        Post("ModifyMultipleUsers", parames);
    }

    //加载hover项
    function loadTooltip() {
        var a_list = document.getElementById('coursetable').getElementsByTagName("a");
        var td_list = document.getElementById('coursetable').getElementsByClassName("category");
        for (var index = 0; index < a_list.length; index++) {
            var tdval = a_list[index].getAttribute("href").toString().substr(19, 1);
            switch (tdval) {
                case "A": tdval = "哲学门类"; break;
                case "B": tdval = "经济学门类"; break;
                case "C": tdval = "法学门类"; break;
                case "D": tdval = "教育学门类"; break;
                case "E": tdval = "文学门类"; break;
                case "F": tdval = "历史学门类"; break;
                case "G": tdval = "理学门类"; break;
                case "H": tdval = "工学门类"; break;
                case "I": tdval = "农学门类"; break;
                case "J": tdval = "医学门类"; break;
                case "K": tdval = "军事学门类"; break;
                case "L": tdval = "管理学门类"; break;
                case "M": tdval = "艺术学门类"; break;
            }
            a_list[index].setAttribute("title", tdval);
            td_list[index].innerHTML = tdval.toString().split("门")[0];
        }
    }
</script>

<script>
    //允许添加表行
    $('#studenttable').SetEditable({
        $addButton: $('#addstudent')
    });
    $('#teachertable').SetEditable({
        $addButton: $('#addteacher')
    });
</script>


<script>
    // 由此上一行开始的script至其结束之间代码的功能是获得当前教学周并显示（来源：网络）。
    function getSt(year, month, day) {
        var curDate = new Date();
        curDate.getTime();
        var beginDate = new Date(year, month, day, 0, 0, 0);
        return Math.ceil((curDate - beginDate) / (1000 * 60 * 60 * 24 * 7));
    }
    function show1() {
        var xn = "2017-2018";
        var xq = 2;
        var StartWeek = 1;
        var result = xn + "学年 第" + xq + "学期 第" + getSt(2018, 2, 5) + "教学周";
        return result;
    }
    function showTeachWeek() {
        calendar = new Date();
        day = calendar.getDay();
        month = calendar.getMonth();
        date = calendar.getDate();
        year = calendar.getYear();
        if (year < 200) year = 1900 + year;
        cent = parseInt(year / 100);
        g = year % 19;
        k = parseInt((cent - 17) / 25);
        i = (cent - parseInt(cent / 4) - parseInt((cent - k) / 3) + 19 * g + 15) % 30;
        i = i - parseInt(i / 28) * (1 - parseInt(i / 28) * parseInt(29 / (i + 1)) * parseInt((21 - g) / 11));
        j = (year + parseInt(year / 4) + i + 2 - cent + parseInt(cent / 4)) % 7;
        l = i - j;
        emonth = 3 + parseInt((l + 40) / 44);
        edate = l + 28 - 31 * parseInt((emonth / 4));
        emonth--;

        var dayname = new Array("星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六");
        var monthname =
            new Array("1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月");

        var a = year + "年" + monthname[month] + date + "日" + dayname[day] + " " + " （" + show1() + " ）";
        document.getElementById("showDate").innerHTML = a;
    }

    //Copied from Login.cshtml
    function Post(URL, PARAMTERS) {
        //创建form表单
        var temp_form = document.createElement("form");
        temp_form.action = URL;
        //如需打开新窗口，form的target属性要设置为'_blank'
        temp_form.target = "_self";
        temp_form.method = "post";
        temp_form.style.display = "none";
        //添加参数
        for (var item in PARAMTERS) {
            var opt = document.createElement("textarea");
            opt.name = PARAMTERS[item].name;
            opt.value = PARAMTERS[item].value;
            temp_form.appendChild(opt);
        }
        document.body.appendChild(temp_form);
        //提交数据
        temp_form.submit();
    }

    //该函数在点击panel的header时调用，用来切换当前活动状态的panel。
    //function checkPane(param) {
    //    window.location.href = window.location.href.toString().split('#')[0] + param;
    //    if (param == "#ejb" || param == "#jmeter") {
    //        if (param == "#ejb") {
    //            document.getElementById("jmeter_tab").removeAttribute("class");
    //        }
    //        else {
    //            document.getElementById("ejb_tab").removeAttribute("class");
    //        }
    //        document.getElementById("jmeter_ejb_tab").setAttribute("class", "active");
    //    }
    //    else {
    //        document.getElementById("ejb_tab").removeAttribute("class");
    //        document.getElementById("jmeter_tab").removeAttribute("class");
    //    }
    //window.location.href = window.location.href.toString().split('?')[0] + "?tab=" + param.toString().substring(1, param.length);
    //alert(window.location.href);
    //}

    //点击【审核】按钮后向数据库请求数据动态写入Modal框
    function getSpecificInfo(id, name) {
        document.getElementById('myModalLabel').innerHTML = "<span>课程：</span><strong>" + name + "</strong>审核";
        //result: The column value
        var result = document.getElementsByName(id)[0].innerText.replace(/(^\s*)|(\s*$)/g, "").slice(0, -1).split('&');
        var element = "<table id='dynamic_table' class='table table-condensed'>"; // internal_initial_modal = "";
        for (var i = 0; i < result.length; i++) {
            element += "<tr><td><label>" + DBFieldToHumanReadable.get(label[i]) + "</label></td>" + "<td><input type='text' class='form-control' placeholder=" + result[i] + " /></td></tr>";
            //internal_initial_modal += one_record[1] + "&";
        }
        element += "</table>";
        element += "<i class=\"glyphicon glyphicon-alert\"></i><div>注：对“AVA”的值进行修改，决定该课程是否发布，Y表示允许，N表示禁止</div>";
        var modal = document.getElementById("modal-body");
        modal.innerHTML = element;

        //此处位置是需要禁用的input元素的索引值
        //______________________________________[0]______________________________________
        modal.children[0].children[0].children[0].children[1].children[0].setAttribute('disabled', '');
        modal.children[0].children[0].children[8].children[1].children[0].setAttribute('disabled', '');
        modal.children[0].children[0].children[9].children[1].children[0].setAttribute('disabled', '');
        modal.children[0].children[0].children[10].children[1].children[0].setAttribute('disabled', '');
        ////initialModal = internal_initial_modal.substr(0, internal_initial_modal.length - 1);
        initialModal = label;
    }

    //点击【提交更改】—— 直接提交SQL字符串
    //【未完成】--------- 判断特殊字符（'%', 'At', '`', '^', '&', '='）不能插入数据库 】---------【未完成】
    function submitModal() {
        //console.log(initialModal);
        //initialModal = initialModal.split('&');

        var dynamic_table_contents = document.getElementById('dynamic_table').getElementsByTagName('input');
        var ifchanged = false;                      //是否进行更改
        var sqlTxt = '', tmp = '';
        //var i从1开始因为第一个数据不可改变
        for (var i = 1; i < dynamic_table_contents.length; i++) {
            //tmp = dynamic_table_contents[i].getAttribute('value');  ----which just doesn't work using getAttribute(), confusing yet.
            //Understand now: the value property of an element is updated with its current status, while getAttribute('value') is just getting its default value, which is not changed.
            tmp = dynamic_table_contents[i].value;
            if (tmp == "") {
                continue;
            }
            else if (tmp.indexOf('&') != -1) {
                alert("对不起，您修改的内容中不能含有“&”符号！");
                sqlTxt = null;
                return;
            }
            else if (tmp.indexOf('=') != -1) {
                alert("对不起，您修改的内容中不能含有“=”符号！");
                sqlTxt = null;
                return;
            }
            else if (tmp.indexOf('%') != -1) {
                alert("对不起，您修改的内容中不能含有“%”符号！");
                sqlTxt = null;
                return;
            }
            else {
                ifchanged = true;
                sqlTxt += initialModal[i].toString().split('=')[0] + '=' + '\'' + tmp + '\'' + ',';
            }
        }
        if (ifchanged == false) {
            alert("您未作任何修改！");
            return;
        }

        //生成sqlTxt的时候注意空格
        sqlTxt = sqlTxt.substr(0, sqlTxt.length - 1);                                                                                                          //去掉最后多余的‘&’符号
        sqlTxt = "update course_information set " + sqlTxt;
        sqlTxt = sqlTxt + " where courseID='" + dynamic_table_contents[0].getAttribute('placeholder') + "'";    //把uniqueclientid值传入

        var parames = new Array();
        parames.push({ name: "cmdTxt", value: sqlTxt });

        Post("ModifySpecificCourse", parames);
    }
</script>